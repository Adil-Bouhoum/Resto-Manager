<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>

<BorderPane xmlns="http://javafx.com/javafx" xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.restaurant.controller.CaisseController">

    <top>
        <VBox spacing="10" style="-fx-padding: 10;">
            <Label text="ðŸ’° Caisse - Paiements" style="-fx-font-size: 18; -fx-font-weight: bold;" />

            <HBox spacing="20">
                <VBox spacing="5">
                    <Label text="ðŸ“Š Statistiques du jour:" style="-fx-font-weight: bold;" />
                    <HBox spacing="15">
                        <VBox>
                            <Label text="Ventes totales:" />
                            <Label fx:id="totalVentesLabel" text="0.00â‚¬" style="-fx-font-weight: bold; -fx-font-size: 14;" />
                        </VBox>
                        <VBox>
                            <Label text="Commandes payÃ©es:" />
                            <Label fx:id="commandesPayeesLabel" text="0" style="-fx-font-weight: bold;" />
                        </VBox>
                        <VBox>
                            <Label text="Panier moyen:" />
                            <Label fx:id="moyennePanierLabel" text="0.00â‚¬" />
                        </VBox>
                    </HBox>
                </VBox>

                <VBox spacing="5">
                    <Label text="ðŸ“… Rapport:" style="-fx-font-weight: bold;" />
                    <HBox spacing="10">
                        <DatePicker fx:id="rapportDatePicker" />
                        <Button text="ðŸ“‹ GÃ©nÃ©rer" onAction="#handleGenerateReport" />
                        <Button text="ðŸ”„ RafraÃ®chir" onAction="#handleRefresh" />
                    </HBox>
                </VBox>
            </HBox>
        </VBox>
    </top>

    <center>
        <SplitPane dividerPositions="0.3">
            <!-- GAUCHE: Commandes Ã  payer -->
            <VBox spacing="10" style="-fx-padding: 10;">
                <Label text="ðŸ’³ Commandes Ã  Payer" style="-fx-font-weight: bold;" />
                <TableView fx:id="commandesAPayerTable" VBox.vgrow="ALWAYS">
                    <columns>
                        <TableColumn text="ID" prefWidth="50" />
                        <TableColumn text="Table" prefWidth="60" />
                        <TableColumn text="Total" prefWidth="80" />
                    </columns>
                </TableView>
                <Button text="ðŸ‘€ Voir dÃ©tails" onAction="#handleViewCommandeDetails" />
            </VBox>

            <!-- CENTER: Paiement -->
            <VBox spacing="15" style="-fx-padding: 15;">
                <Label text="ðŸ’¶ Paiement" style="-fx-font-weight: bold; -fx-font-size: 14;" />

                <GridPane hgap="10" vgap="10">
                    <Label text="Total Ã  payer:" GridPane.rowIndex="0" GridPane.columnIndex="0" />
                    <Label fx:id="totalAPayerLabel" text="0.00â‚¬" GridPane.rowIndex="0" GridPane.columnIndex="1"
                           style="-fx-font-weight: bold;" />

                    <Label text="Mode de paiement:" GridPane.rowIndex="1" GridPane.columnIndex="0" />
                    <ComboBox fx:id="modePaiementCombo" GridPane.rowIndex="1" GridPane.columnIndex="1"
                              prefWidth="150" />

                    <Label text="Montant reÃ§u:" GridPane.rowIndex="2" GridPane.columnIndex="0" />
                    <TextField fx:id="montantField" GridPane.rowIndex="2" GridPane.columnIndex="1"
                               promptText="0.00" />

                    <Label text="Rendu:" GridPane.rowIndex="3" GridPane.columnIndex="0" />
                    <Label fx:id="renduLabel" text="0.00â‚¬" GridPane.rowIndex="3" GridPane.columnIndex="1"
                           style="-fx-font-weight: bold;" />
                </GridPane>

                <Button text="âœ… Enregistrer Paiement" onAction="#handleProcessPayment"
                        style="-fx-font-size: 14; -fx-padding: 10; -fx-background-color: #ccffcc;"
                        prefWidth="200" />
            </VBox>

            <!-- DROITE: Top plats + Commandes payÃ©es -->
            <TabPane>
                <Tab text="ðŸ† Top Plats">
                    <VBox spacing="10" style="-fx-padding: 10;">
                        <TableView fx:id="topPlatsTable" VBox.vgrow="ALWAYS">
                            <columns>
                                <TableColumn text="Plat" />
                                <TableColumn text="QuantitÃ©" />
                            </columns>
                        </TableView>
                    </VBox>
                </Tab>

                <Tab text="âœ… Commandes PayÃ©es">
                    <VBox spacing="10" style="-fx-padding: 10;">
                        <TableView fx:id="commandesPayeesTable" VBox.vgrow="ALWAYS">
                            <columns>
                                <TableColumn text="ID" prefWidth="50" />
                                <TableColumn text="Table" prefWidth="60" />
                                <TableColumn text="Total" prefWidth="80" />
                            </columns>
                        </TableView>
                    </VBox>
                </Tab>
            </TabPane>
        </SplitPane>
    </center>

    <bottom>
        <HBox style="-fx-background-color: #f0f0f0; -fx-padding: 5;">
            <Label text="ðŸ’¡ SÃ©lectionnez une commande â†’ Choisissez mode paiement â†’ Saisissez montant â†’ Enregistrez"
                   style="-fx-text-fill: #666666;" />
        </HBox>
    </bottom>

</BorderPane>